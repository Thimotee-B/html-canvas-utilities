import{r as U,i as H,s as q,$ as Q,n as J}from"./vendor.6869b30c.js";const Z=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}};Z();function V(n){if(n.length===0)return new DOMRect(0,0,0,0);var r=new DOMRect(n[0].x,n[0].y,n[0].width,n[0].height);return n.reduce(function(t,e){return e.x<t.x&&(t.width+=t.x-e.x,t.x=e.x),e.y<t.y&&(t.height+=t.y-e.y,t.y=e.y),e.x+e.width>t.x+t.width&&(t.width=e.x+e.width-t.x),e.y+e.height>t.y+t.height&&(t.height=e.y+e.height-t.y),t},r)}function P(n,r){var t=n.ctx,e=n.size;t.save(),t.strokeStyle=n.resolveValue(r),t.strokeRect(0,0,e.width,e.height),t.restore()}var tt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),z=function(){function n(){this.listeners=[]}return n.prototype.addListener=function(r){this.listeners.push(r)},n.prototype.removeListener=function(r){this.listeners=this.listeners.filter(function(t){return t!==r})},n.prototype.notifyListeners=function(r){for(var t=0,e=this.listeners;t<e.length;t++){var o=e[t];o(r)}},n}();(function(n){tt(r,n);function r(t){var e=n.call(this)||this;return e.value=t,e}return r.prototype.update=function(t){this.value=t,this.notifyListeners()},r})(z);var et=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),D=globalThis&&globalThis.__assign||function(){return D=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},D.apply(this,arguments)},I=function(n){et(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.hidden=!1,t}return r.prototype.selectAt=function(t,e){var o=this.rect;return t.x>=o.x&&t.x<=o.x+o.width&&t.y>=o.y&&t.y<=o.y+o.height&&e===0?this:null},r.prototype.drawDecoration=function(t,e,o){var i=this.rect,s=D(D({},t),{size:i});e.length>0&&e.includes(this)?P(s,"--canvas-selected-color"):o.length>0&&o.includes(this)&&P(s,"--canvas-hovered-color")},r.prototype.move=function(t){this.rect.x+=t.x,this.rect.y+=t.y},r.prototype.resize=function(t){this.rect.width=t.width,this.rect.height=t.height},Object.defineProperty(r.prototype,"size",{get:function(){return{width:this.rect.width,height:this.rect.height}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offset",{get:function(){return{x:this.rect.x,y:this.rect.y}},enumerable:!1,configurable:!0}),r.prototype.onClick=function(t){var e={type:"click",offset:{x:t.x,y:t.y}};this.notifyListeners(e)},r.prototype.onHover=function(t){var e={type:"hover",offset:{x:t.x,y:t.y}};this.notifyListeners(e)},r.prototype.onUpdate=function(t){var e={type:"update",time:t};this.notifyListeners(e)},r}(z),ot=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),S=function(n){ot(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.lineWidth=1,t}return r}(I),rt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$=function(n){rt(r,n);function r(t){var e=n.call(this)||this;return e.options=t,e.fillColor=e.options.fillColor,e.strokeColor=e.options.strokeColor,e.rect=e.options.rect,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save(),e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor));var i=o.width;e.beginPath(),e.moveTo(0,0),e.lineTo(i,0),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),e.restore()},r}(S),nt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),it=function(n){nt(r,n);function r(t){var e=n.call(this,t)||this;return e.options=t,e.startArrow=e.options.startArrow||"none",e.endArrow=e.options.endArrow||"line-arrow",e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save(),e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor));var i=o.width,s=new DOMPoint(0,0),a=new DOMPoint(i,0);e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(a.x,a.y),e.closePath(),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),this.startArrow&&Y(e,s,this.startArrow),this.endArrow&&Y(e,a,this.endArrow),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),e.restore()},r}($);function Y(n,r,t){var e=r.x,o=r.y,i=10,s=10;t==="line-arrow"&&(n.beginPath(),n.moveTo(e,o),n.lineTo(e-i,o-s),n.moveTo(e-i,o+s),n.lineTo(e,o)),t==="triangle-arrow"&&(n.beginPath(),n.moveTo(e,o),n.lineTo(e-i,o-s),n.lineTo(e-i,o+s),n.lineTo(e,o),n.closePath())}var st=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),at=function(n){st(r,n);function r(t){var e=n.call(this)||this;return e.options=t,e.fillColor=e.options.fillColor,e.strokeColor=e.options.strokeColor,e.rect=e.options.rect,e.counterclockwise=e.options.counterclockwise||!1,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save();var i=o.width,s=o.height,a=i/2,l=s/2,c=0,h=2*Math.PI,f=0,u=!1;e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor)),e.translate(a,l),e.beginPath(),e.ellipse(0,0,a,l,f,c,h,u),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),e.restore()},r}(S),lt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),y=function(n){lt(r,n);function r(t){var e=n.call(this)||this;return e.options=t,e.fillColor=e.options.fillColor,e.strokeColor=e.options.strokeColor,e.rect=e.options.rect,e.cornerRadius=e.options.cornerRadius,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;if(e.save(),e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor)),this.cornerRadius)if(Array.isArray(this.cornerRadius)){var i=this.cornerRadius,s=i[0],a=i[1],l=i[2],c=i[3];k(e,o,{tl:s,tr:a,br:l,bl:c}),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}else{var h=this.cornerRadius;k(e,o,{tl:h,tr:h,br:h,bl:h}),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}else this.fillColor&&e.fillRect(0,0,o.width,o.height),this.strokeColor&&e.strokeRect(0,0,o.width,o.height);e.restore()},r}(S);function k(n,r,t){var e=t.tl,o=t.tr,i=t.br,s=t.bl;n.beginPath(),n.moveTo(e,0),n.lineTo(r.width-o,0),n.quadraticCurveTo(r.width,0,r.width,o),n.lineTo(r.width,r.height-i),n.quadraticCurveTo(r.width,r.height,r.width-i,r.height),n.lineTo(s,r.height),n.quadraticCurveTo(0,r.height,0,r.height-s),n.lineTo(0,e),n.quadraticCurveTo(0,0,e,0),n.closePath()}var ct=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ht=function(n){ct(r,n);function r(t){var e=n.call(this,t)||this;e.options=t,e.loaded=!1,e.error=!1,e.smoothingEnabled=e.options.smoothingEnabled,e.smoothingQuality=e.options.smoothingQuality,e.filter=e.options.filter;var o=new Image;return o.crossOrigin="anonymous",o.src=t.image,e.image=o,o.onload=function(){e.loaded=!0},o.onerror=function(){e.error=!0,e.loaded=!0},e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;if(n.prototype.draw.call(this,t),this.error)W(t,"red");else if(this.loaded){if(e.save(),this.options.smoothingEnabled&&this.options.smoothingQuality&&(e.imageSmoothingEnabled=!0,e.imageSmoothingQuality=this.options.smoothingQuality),this.cornerRadius){if(Array.isArray(this.cornerRadius)){var i=this.cornerRadius,s=i[0],a=i[1],l=i[2],c=i[3];k(e,o,{tl:s,tr:a,br:l,bl:c})}else{var h=this.cornerRadius;k(e,o,{tl:h,tr:h,br:h,bl:h})}e.clip()}this.filter&&(e.filter=this.filter),e.drawImage(this.image,0,0,o.width,o.height),e.restore()}else W(t,"--canvas-grid-color")},r}(y);function W(n,r){var t=n.ctx,e=n.size;t.save(),t.fillStyle=n.resolveValue(r),t.strokeStyle=n.resolveValue(r),t.strokeRect(0,0,e.width,e.height),t.beginPath(),t.moveTo(0,0),t.lineTo(e.width,e.height),t.moveTo(e.width,0),t.lineTo(0,e.height),t.stroke(),t.restore()}var ft=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),B=function(n){ft(r,n);function r(t){var e=n.call(this)||this;return e.options=t,e.fillColor=e.options.fillColor,e.strokeColor=e.options.strokeColor,e.rect=e.options.rect,e.pointCount=e.options.pointCount||5,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save(),e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor));var i=o.width,s=o.height,a=i/2,l=s/2;e.beginPath();for(var c=0;c<this.pointCount;c++){var h=Math.PI*2/this.pointCount,f=a+a*Math.cos(h*c),u=l+l*Math.sin(h*c);c===0?e.moveTo(f,u):e.lineTo(f,u)}e.closePath(),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),e.restore()},r}(S),ut=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pt=function(n){ut(r,n);function r(t){var e=n.call(this,t)||this;return e.options=t,e.fillColor=e.options.fillColor,e.strokeColor=e.options.strokeColor,e.rect=e.options.rect,e.pointCount=e.options.pointCount||5,e.innerRadius=e.options.innerRadius,e.outerRadius=e.options.outerRadius,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save(),e.lineWidth=this.lineWidth,this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor));var i=o.width,s=o.height,a=i/2,l=s/2,c=this.innerRadius||a/2,h=this.outerRadius||i/2,f=Math.PI/2*3,u=a,p=l,d=Math.PI/this.pointCount;e.beginPath(),e.moveTo(a,l-h);for(var g=0;g<this.pointCount;g++)u=a+Math.cos(f)*h,p=l+Math.sin(f)*h,e.lineTo(u,p),f+=d,u=a+Math.cos(f)*c,p=l+Math.sin(f)*c,e.lineTo(u,p),f+=d;e.lineTo(a,l-h),e.closePath(),this.fillColor&&e.fill(),this.strokeColor&&e.stroke(),e.restore()},r}(B),dt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),G=function(n){dt(r,n);function r(t){var e=this,o,i,s,a,l;return e=n.call(this)||this,e.options=t,e.x=0,e.y=0,e.removeOnEmpty=!0,e.characters=t.characters,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.x=t.offset.x,e.y=t.offset.y,e.fontSize=(o=t.fontSize)!==null&&o!==void 0?o:16,e.fontFamily=(i=t.fontFamily)!==null&&i!==void 0?i:"sans-serif",e.direction=(s=t.direction)!==null&&s!==void 0?s:"inherit",e.textAlign=(a=t.textAlign)!==null&&a!==void 0?a:"start",e.textBaseline=(l=t.textBaseline)!==null&&l!==void 0?l:"middle",e}return r.prototype.draw=function(t){var e=t.ctx;t.size,e.save();var o=this.text(e);o.width;var i=o.height;e.translate(0,i/2),this.fillColor&&(e.fillStyle=t.resolveValue(this.fillColor),e.fillText(this.characters,0,0)),this.strokeColor&&(e.strokeStyle=t.resolveValue(this.strokeColor),e.strokeText(this.characters,0,0)),e.translate(0,-(i/2)),e.restore()},r.prototype.text=function(t){t.lineWidth=this.lineWidth,t.font="".concat(this.fontSize,"px ").concat(this.fontFamily),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.direction=this.direction;var e=t.measureText(this.characters).width,o=this.fontSize;return{width:e,height:o}},r.prototype.move=function(t){this.x+=t.x,this.y+=t.y},Object.defineProperty(r.prototype,"rect",{get:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),o=this.text(e),i=o.width,s=o.height;return new DOMRect(this.x,this.y,i,s)},enumerable:!1,configurable:!0}),r}(S),vt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),w=globalThis&&globalThis.__assign||function(){return w=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},w.apply(this,arguments)},N=function(n){vt(r,n);function r(t){var e=n.call(this,t)||this;return e.options=t,e.child=e.options.child,e.padding=e.options.padding,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size,i=w({},o),s=w(w({},t),{size:i});n.prototype.draw.call(this,s),j(this.padding,function(a,l,c,h){e.translate(l,a),i.width-=l+h,i.height-=a+c}),this.child.draw(s)},r.prototype.drawDecoration=function(t,e,o){var i=t.ctx;j(this.padding,function(l,c){i.translate(-c,-l)});var s=w(w({},t),{size:this.rect});e.length>0&&e.includes(this)?P(s,"--canvas-selected-color"):o.length>0&&o.includes(this)&&P(s,"--canvas-hovered-color");var a={width:this.rect.width,height:this.rect.height};j(this.padding,function(l,c,h,f){i.translate(c,l),a.width-=c+f,a.height-=l+h}),this.child.drawDecoration(w(w({},s),{size:a}),e,o)},r.prototype.selectAt=function(t,e){var o=n.prototype.selectAt.call(this,t,e);if(o)return o;var i=new DOMPoint(t.x-this.rect.x,t.y-this.rect.y),s=this.child.selectAt(i,e-1);return s||null},r}(y);function j(n,r){if(n)if(Array.isArray(n)){var t=n[0],e=n[1],o=n[2],i=n[3];r(t,e,o,i)}else{var s=n;r(s,s,s,s)}}var yt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gt=function(n){yt(r,n);function r(t){var e=n.call(this,t)||this;return e.label=t.label,e}return r.prototype.draw=function(t){this.drawLabel(t),n.prototype.draw.call(this,t)},r.prototype.drawLabel=function(t){var e=t.ctx,o=t.scale;e.scale(1/o,1/o);var i=1.2,s=10*i;e.font="".concat(s,"px sans-serif"),e.fillStyle=t.resolveValue("--canvas-text-color");var a="...",l=e.measureText(this.label).width,c=s,h=this.rect.width*o;if(e.translate(0,-6),l>h){var f=e.measureText(a).width;l=h-f;var u=this.label;u=u.slice(0,-3),u+=a,e.save(),e.beginPath(),e.rect(0,-c,h,20),e.clip(),e.fillText(u,0,0),e.restore()}else e.fillText(this.label,0,0);e.translate(0,6),e.scale(o,o)},r}(N),wt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xt=function(n){wt(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(I),_t=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),O=globalThis&&globalThis.__assign||function(){return O=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},O.apply(this,arguments)},mt=function(n){_t(r,n);function r(t){var e=this,o;return e=n.call(this)||this,e.options=t,e.children=e.options.children,e.rect=e.options.rect,e.clip=(o=e.options.clip)!==null&&o!==void 0?o:!0,e}return r.prototype.draw=function(t){var e=t.ctx,o=t.size;e.save(),this.clip&&(e.save(),e.beginPath(),e.rect(0,0,o.width,o.height),e.clip());for(var i=0,s=this.children;i<s.length;i++){var a=s[i];e.translate(a.rect.x,a.rect.y),a.draw(O(O({},t),{size:a.rect})),e.translate(-a.rect.x,-a.rect.y)}e.restore()},r.prototype.selectAt=function(t,e){var o=n.prototype.selectAt.call(this,t,e);if(o)return o;for(var i=0,s=Array.from(this.children).reverse();i<s.length;i++){var a=s[i],l=new DOMPoint(t.x-this.rect.x,t.y-this.rect.y),c=a.selectAt(l,e-1);if(c)return c}return null},r.prototype.drawDecoration=function(t,e,o){var i=t.ctx,s=O(O({},t),{size:this.rect});n.prototype.drawDecoration.call(this,s,e,o);for(var a=0,l=this.children;a<l.length;a++){var c=l[a];i.translate(c.rect.x,c.rect.y),c.drawDecoration(s,e,o),i.translate(-c.rect.x,-c.rect.y)}},r}(xt);function Ct(n,r){var t=n.ctx;n.size;var e=n.scale,o=n.offset,i=r.backgroundColor,s=r.gridColor,a=t.canvas;t.save();var l=20*e,c=Math.round(o.x)%l,h=Math.round(o.y)%l;t.fillStyle=n.resolveValue(i),t.fillRect(0,0,a.width,a.height),t.strokeStyle=n.resolveValue(s),t.lineWidth=.23*e;for(var f=c;f<a.width;f+=l)t.beginPath(),t.moveTo(f,0),t.lineTo(f,a.height),t.stroke();for(var u=h;u<a.height;u+=l)t.beginPath(),t.moveTo(0,u),t.lineTo(a.width,u),t.stroke();t.restore()}var Ot=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),F={scale:1,offset:new DOMPoint(0,0)},Mt=function(n){Ot(r,n);function r(t,e){t===void 0&&(t=document.createElement("canvas")),e===void 0&&(e=F);var o=n.call(this)||this;o.canvas=t,o.options=e,o.gestureEvent=!1,o.mouse=new DOMPoint(0,0),o.mouseDown=!1,o.spacePressed=!1,o.controlPressed=!1,o.shiftPressed=!1,o.metaPressed=!1,o.middleClick=!1,o.shouldNotify=!0,o.minScale=.1,o.maxScale=10,o.ctx=o.canvas.getContext("2d"),o.transform=o.ctx.getTransform(),o.shouldNotify=!1;var i=e.scale,s=e.offset;return o.scale(i),o.pan(s),o.shouldNotify=!0,t.addEventListener("wheel",o.onWheelEvent.bind(o),{passive:!1}),t.addEventListener("mousedown",o.onMouseDown.bind(o),!1),t.addEventListener("mousemove",o.onMouseMove.bind(o),!1),t.addEventListener("mouseup",o.onMouseUp.bind(o),!1),t.addEventListener("touchstart",o.onTouchStart.bind(o),!1),t.addEventListener("touchmove",o.onTouchMove.bind(o),!1),t.addEventListener("touchend",o.onTouchEnd.bind(o),!1),t.addEventListener("dblclick",o.onDoubleClick.bind(o),!1),t.addEventListener("click",o.onClick.bind(o),!1),t.addEventListener("gesturestart",o.onGestureStart.bind(o),!1),t.addEventListener("gesturechange",o.onGestureChange.bind(o),!1),t.addEventListener("gestureend",o.onGestureEnd.bind(o),!1),document.addEventListener("keydown",o.onKeyDownEvent.bind(o),!1),document.addEventListener("keyup",o.onKeyUpEvent.bind(o),!1),t.addEventListener("dragover",o.onDrop.bind(o),!1),t.addEventListener("drop",o.onDrop.bind(o),!1),o}return Object.defineProperty(r.prototype,"matrix",{get:function(){return this.transform},set:function(t){this.transform=t,this.notify()},enumerable:!1,configurable:!0}),r.prototype.notify=function(){!this.shouldNotify||this.notifyListeners()},r.prototype.localPoint=function(t){var e=this.info,o=e.scale,i=e.offset,s=t.x/o-i.x/o,a=t.y/o-i.y/o;return new DOMPoint(s,a)},r.prototype.worldPoint=function(t){var e=this.info,o=e.scale,i=e.offset,s=t.x*o+i.x,a=t.y*o+i.y;return new DOMPoint(s,a)},r.prototype.applyTransform=function(t){t.setTransform(this.matrix)},r.prototype.scale=function(t,e){if(!Number.isNaN(t)){var o=t*this.info.scale;if(this.options.scale=o,!(o<this.minScale||o>this.maxScale)){var i=e||this.mouse,s=this.localPoint(i);this.matrix=this.matrix.scale(t,t,0,s.x,s.y,s.z),this.notify()}}},r.prototype.zoom=function(t,e){if(!Number.isNaN(t)){var o=this.info.scale-t;if(this.options.scale=t,!(t<this.minScale||t>this.maxScale)){var i=e||this.mouse,s=this.localPoint(i);this.matrix=this.matrix.scale(o,o,0,s.x,s.y,s.z),this.notify()}}},r.prototype.zoomIn=function(){this.scale(1.1)},r.prototype.zoomOut=function(){this.scale(.9)},r.prototype.reset=function(){this.matrix=new DOMMatrix},r.prototype.pan=function(t){if(!Number.isNaN(t)){var e=this.info.scale;this.options.offset.x+=t.x/e,this.options.offset.y+=t.y/e,this.matrix=this.matrix.translate(t.x/e,t.y/e,t.z/e),this.notify()}},Object.defineProperty(r.prototype,"info",{get:function(){var t=St(this.matrix),e=t.scaleX,o=t.scaleY,i=t.translateX,s=t.translateY,a=t.rotate;return{scale:Math.min(e,o),offset:new DOMPoint(i,s),rotation:a,mouse:this.mouse,mouseDown:this.mouseDown}},enumerable:!1,configurable:!0}),r.prototype.onWheelEvent=function(t){if(this.preventDefault(t),!this.gestureEvent){var e=new DOMPoint(t.offsetX,t.offsetY);if(t.ctrlKey||this.controlPressed){var o=1;t.deltaY<0?o=Math.min(this.maxScale,o*1.1):o=Math.max(this.minScale,o*(1/1.1)),this.scale(o,e)}else this.pan(new DOMPoint(-t.deltaX,-t.deltaY))}},r.prototype.onMouseDown=function(t){this.mouse=new DOMPoint(t.offsetX,t.offsetY),this.mouseDown=!0},r.prototype.onMouseMove=function(t){this.mouse=new DOMPoint(t.offsetX,t.offsetY)},r.prototype.onMouseUp=function(t){this.mouse=new DOMPoint(t.offsetX,t.offsetY),this.mouseDown=!1},r.prototype.onTouchStart=function(t){this.preventDefault(t),this.touches=t.touches,this.mouseDown=!0,this.gestureEvent=this.touches.length>1},r.prototype.onTouchMove=function(t){this.preventDefault(t);var e=this.touches;if(this.touches=t.touches,this.gestureEvent){var o=new DOMPoint(e[0].clientX,e[0].clientY),i=new DOMPoint(e[1].clientX,e[1].clientY),s=new DOMPoint(this.touches[0].clientX,this.touches[0].clientY),a=new DOMPoint(this.touches[1].clientX,this.touches[1].clientY);if(this.touches.length===2){var l=new DOMPoint((o.x+i.x)/2,(o.y+i.y)/2),c=new DOMPoint((s.x+a.x)/2,(s.y+a.y)/2),h=X(o,i),f=X(s,a),u=f/h;if(this.scale(u,c),c!==l){var p=new DOMPoint(Math.min(o.x,i.x),Math.min(o.y,i.y)),d=new DOMPoint(Math.min(s.x,a.x),Math.min(s.y,a.y)),g=new DOMPoint(d.x-p.x,d.y-p.y);this.pan(g)}}else if(this.touches.length===3){var x=new DOMPoint(e[2].clientX,e[2].clientY),v=new DOMPoint(this.touches[2].clientX,this.touches[2].clientY),p=new DOMPoint(Math.min(o.x,i.x,x.x),Math.min(o.y,i.y,x.y)),d=new DOMPoint(Math.min(s.x,a.x,x.x),Math.min(s.y,a.y,v.y)),g=new DOMPoint(d.x-p.x,d.y-p.y);this.pan(g)}}},r.prototype.onTouchEnd=function(t){this.preventDefault(t),this.touches=t.touches,this.mouseDown=this.touches.length===0,this.gestureEvent=this.touches.length>1},r.prototype.onKeyDownEvent=function(t){var e=this.canvas===document.activeElement;!e||(this.preventDefault(t),t.key==="ArrowLeft"?this.pan(new DOMPoint(-10,0)):t.key==="ArrowRight"?this.pan(new DOMPoint(10,0)):t.key==="ArrowUp"?this.pan(new DOMPoint(0,-10)):t.key==="ArrowDown"?this.pan(new DOMPoint(0,10)):t.key==="="?this.scale(1.1,this.mouse):t.key==="-"&&this.scale(1/1.1,this.mouse),this.controlPressed=t.ctrlKey,this.shiftPressed=t.shiftKey,this.metaPressed=t.metaKey,this.spacePressed=t.key===" ")},r.prototype.onKeyUpEvent=function(t){this.preventDefault(t),this.controlPressed=!1,this.spacePressed=!1,this.shiftPressed=!1,this.metaPressed=!1},r.prototype.onDoubleClick=function(t){this.preventDefault(t)},r.prototype.onClick=function(t){this.preventDefault(t)},r.prototype.onDragOver=function(t){this.preventDefault(t)},r.prototype.onDrop=function(t){this.preventDefault(t)},r.prototype.onGestureStart=function(t){return this.preventDefault(t),this._previousGesture=t,this.gestureEvent=!0,!1},r.prototype.onGestureChange=function(t){this.preventDefault(t);var e=new DOMPoint(t.clientX,t.clientY),o=this._previousGesture.scale,i=t.scale,s=i/o;return this.scale(s,e),this._previousGesture=t,!1},r.prototype.onGestureEnd=function(t){return this.preventDefault(t),this._previousGesture=t,this.gestureEvent=!1,!1},r.prototype.preventDefault=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},r}(z);function St(n){var r=(n.a+n.d)/2,t=(n.a-n.d)/2,e=(n.c+n.b)/2,o=(n.c-n.b)/2,i=Math.sqrt(r*r+o*o),s=Math.sqrt(t*t+e*e),a=Math.atan2(e,t),l=Math.atan2(o,r),c=(l-a)/2,h=(l+a)/2;return{translateX:n.e,translateY:n.f,rotate:-h*180/Math.PI,scaleX:i+s,scaleY:i-s,skew:-c*180/Math.PI}}function X(n,r){return Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}var Tt=globalThis&&globalThis.__extends||function(){var n=function(r,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},n(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_=globalThis&&globalThis.__assign||function(){return _=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},_.apply(this,arguments)},Pt=_(_({},F),{devicePixelRatio:window.devicePixelRatio||1,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}),Dt=function(n){Tt(r,n);function r(t,e){t===void 0&&(t=document.createElement("canvas")),e===void 0&&(e=Pt);var o=n.call(this,t,e)||this;return o.canvas=t,o.options=e,o.children=[],o.selection=[],o.hovered=[],o.canSelect=!0,o.canMove=!0,o.canDelete=!0,o.canEditText=!0,o.drawGrid=!0,o.selectIndex=0,o.isMoving=!1,o.editingText=!1,o}return r.prototype.drawBackground=function(){var t=this.info,e=t.offset,o=t.scale,i=this,s=i.ctx,a=i.canvas;if(this.options.drawBackground!==void 0){s.save(),this.options.drawBackground(s,e,o),s.restore();return}s.save(),s.fillStyle=this.resolveValue(a,"--canvas-background-color"),s.fillRect(0,0,a.width,a.height),this.drawGrid&&Ct(this.getContext(s),{backgroundColor:"--canvas-background-color",gridColor:"--canvas-grid-color"}),s.restore()},r.prototype.resize=function(){var t=this.canvas,e=getComputedStyle(t),o=this,i=o.canvas;o.ctx;var s=parseInt(e.width,10),a=parseInt(e.height,10);i.width=s,i.height=a},r.prototype.canvasResize=function(){var t=this,e=t.canvas,o=t.ctx,i=e.getBoundingClientRect(),s=this.options.devicePixelRatio;e.width=i.width*s,e.height=i.height*s,o.clearRect(0,0,e.width,e.height),o.scale(s,s)},r.prototype.paint=function(t){var e=this;t===void 0&&(t=0);var o=this,i=o.canvas,s=o.ctx;if(this.resize(),s.imageSmoothingEnabled=this.options.imageSmoothingEnabled,s.imageSmoothingQuality=this.options.imageSmoothingQuality,s.clearRect(0,0,i.width,i.height),this.drawBackground(),this.applyTransform(s),this.drawContent(s,t),this.applyTransform(s),this.selection.length>1){var a=V(this.selection.map(function(l){return l.rect}));s.save(),s.translate(a.x,a.y),this.drawOutline(this.getContext(s),"--canvas-selected-color"),s.restore()}requestAnimationFrame(function(l){return e.paint(l)})},r.prototype.drawContent=function(t,e){for(var o=0,i=this.children;o<i.length;o++){var s=i[o];this.drawChild(t,s,e)}},r.prototype.drawChild=function(t,e,o){var i=e.offset;t.save(),t.translate(i.x,i.y);var s=this.getContext(t);e.onUpdate(o),e.hidden||e.draw(_(_({},s),{size:e.size})),e.drawDecoration(s,this.selection,this.hovered),t.translate(-i.x,-i.y),t.restore()},r.prototype.getContext=function(t){var e=this;return _({ctx:t,size:{width:this.canvas.width,height:this.canvas.height},resolveValue:function(o){return e.resolveValue(t.canvas,o)}},this.info)},r.prototype.drawOutline=function(t,e){var o=t.ctx,i=t.size,s=this.canvas;if(this.options.drawOutline!==void 0){o.save(),this.options.drawOutline(o,i,e),o.restore();return}o.save(),o.strokeStyle=this.resolveValue(s,e),o.strokeRect(0,0,i.width,i.height),o.restore()},r.prototype.getSelectionAt=function(t,e){for(var o=this.localPoint(t),i=[],s=this.selectIndex+1;i.length===0&&s>-1;){s--;for(var a=0,l=Array.from(this.children).reverse();a<l.length;a++){var c=l[a],h=c.selectAt(o,s);h&&i.push(h)}}return i.slice(0,e.max)},r.prototype.onMouseDown=function(t){if(n.prototype.onMouseDown.call(this,t),this.middleClick=t.button===1,this.canSelect){if(this.selection.length>0){var e=this.localPoint(this.mouse),o=V(this.selection.map(function(s){return s.rect}));if(e.x>=o.x&&e.x<=o.x+o.width&&e.y>=o.y&&e.y<=o.y+o.height)return}var i=this.getSelectionAt(this.mouse,{max:1,level:this.selectIndex});this.updateSelection(i)}this.updateCursor()},r.prototype.onMouseUp=function(t){n.prototype.onMouseUp.call(this,t),this.isMoving=!1,this.middleClick=!1,this.updateCursor()},r.prototype.resolveValue=function(t,e){if(e.startsWith("--"))for(var o=getComputedStyle(t!=null?t:document.body),i=e.split(","),s=0,a=i;s<a.length;s++){var l=a[s];if(l!==""&&!l.startsWith("--"))return l;var c=o.getPropertyValue(l);if(c!=="")return c}return e},r.prototype.onMouseMove=function(t){var e=this.mouse;n.prototype.onMouseMove.call(this,t),this.hovered=this.getSelectionAt(this.mouse,{max:1,level:0});for(var o=0,i=this.hovered;o<i.length;o++){var s=i[o];s.onHover(this.mouse)}this.mouseDown&&(this.isMoving=!0,this.move(new DOMPoint(this.mouse.x-e.x,this.mouse.y-e.y))),this.updateCursor()},r.prototype.onTouchStart=function(t){n.prototype.onTouchStart.call(this,t)},r.prototype.onTouchMove=function(t){var e=(this.touches||[])[0];if(n.prototype.onTouchMove.call(this,t),!this.gestureEvent){var o=t.touches[0],i=new DOMPoint(o.clientX-e.clientX,o.clientY-e.clientY);this.move(i)}},r.prototype.move=function(t){if(this.spacePressed||this.middleClick)this.pan(new DOMPoint(t.x,t.y));else if(this.canMove&&this.selection.length>0){for(var e=this.info.scale,o=0,i=this.selection;o<i.length;o++){var s=i[o];s.move({x:t.x/e,y:t.y/e})}this.notify()}},r.prototype.onKeyDownEvent=function(t){var e=this.canvas===document.activeElement;!e||(n.prototype.onKeyDownEvent.call(this,t),t.key==="Backspace"&&this.removeSelection(),t.metaKey&&t.key==="a"&&this.updateSelection(this.children),this.updateCursor())},r.prototype.onKeyUpEvent=function(t){n.prototype.onKeyUpEvent.call(this,t),this.updateCursor()},r.prototype.updateCursor=function(){var t=this,e=t.hovered,o=t.selection,i=t.spacePressed,s=t.canMove,a=o.length>0&&o.every(function(l){return e.includes(l)});i||this.middleClick?this.canvas.style.cursor="grab":o.length>0&&a&&s?this.canvas.style.cursor="move":this.canvas.style.cursor="default"},r.prototype.selectAt=function(t){for(var e=this.getSelectionAt(t,{max:1,level:this.selectIndex}),o=0,i=e;o<i.length;o++){var s=i[o];if(s instanceof G&&this.selectIndex>0&&this.canEditText){this.onEditText(t,s);continue}s.onClick(t)}this.updateSelection(e)},r.prototype.onEditText=function(t,e){var o=this,i;this.editingText=!0,e.hidden=!0;var s=e.characters,a=document.createElement("input"),l=this.worldPoint(new DOMPoint(e.rect.x,e.rect.y)),c=a.style;c.position="fixed",c.left="".concat(l.x,"px"),c.top="".concat(l.y,"px");var h=this.info.scale,f=e.fontSize*h,u=e.rect.width*h,p=e.rect.height*h;c.width="".concat(u,"px"),c.height="".concat(p,"px"),c.fontSize="".concat(f,"px"),c.fontFamily=e.fontFamily,c.zIndex="1",c.border="none",c.outline="none",c.padding="0",c.margin="0",c.textAlign=e.textAlign,c.direction=e.direction,c.verticalAlign=e.textBaseline,c.backgroundColor="var(--canvas-background-color)";var d=(i=e.fillColor)!==null&&i!==void 0?i:e.strokeColor;c.color=this.resolveValue(this.canvas,d),document.body.appendChild(a),a.focus(),a.value=e.characters,a.addEventListener("input",function(v){var m=v.target;e.characters=m.value;var T=document.createElement("canvas"),A=T.getContext("2d");A.font="".concat(f,"px ").concat(e.fontFamily);var L=A.measureText(m.value).width;e.rect.width=L*h,c.width="".concat(L,"px")});var g=!1,x=function(v){if(v.preventDefault(),!g){var m=v.target,T=m.value.trim().length===0;o.canDelete?T&&e.removeOnEmpty?(o.selection=[e],o.removeSelection()):e.characters=m.value:e.characters=T?s:m.value,e.notifyListeners();try{a.remove()}catch{}return o.editingText=!1,g=!0,e.hidden=!1,!1}};a.addEventListener("blur",x.bind(this),!1),a.addEventListener("change",x.bind(this),!1),a.addEventListener("keydown",function(v){(v.key==="Enter"||v.key==="Escape")&&x(v)})},r.prototype.updateSelection=function(t){var e=this;this.shiftPressed?(this.selection=this.selection.concat(t),this.selection=this.selection.filter(function(o,i){return e.selection.indexOf(o)===i})):this.selection=t,this.updateCursor(),this.notify()},r.prototype.clearSelection=function(){this.updateSelection([])},r.prototype.removeSelection=function(){var t=this;!this.canDelete||(this.children=this.children.filter(function(e){return!t.selection.includes(e)}),this.clearSelection())},r.prototype.addChild=function(t){this.children.push(t),this.updateSelection([t])},r.prototype.onClick=function(t){if(n.prototype.onClick.call(this,t),this.canSelect&&!this.isMoving){var e=new DOMPoint(t.clientX,t.clientY);this.selectIndex=0,this.selectAt(e)}},r.prototype.onDoubleClick=function(t){if(n.prototype.onDoubleClick.call(this,t),this.canSelect&&!this.isMoving){var e=new DOMPoint(t.clientX,t.clientY);this.selectIndex+=1,this.selectAt(e)}},r.prototype.init=function(){var t=this;window.addEventListener("resize",function(){return t.resize()}),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.clearSelection(),this.canvasResize(),this.paint()},r}(Mt);function kt(n){const r=["circle","rect","star","polygon","line","arrow"];for(let o=0;o<20;o++){const i=r[Math.floor(Math.random()*r.length)],{x:s,y:a}={x:Math.random()*n.canvas.width,y:Math.random()*n.canvas.height},l=`hsl(${Math.random()*360}, 100%, 50%)`;i==="rect"&&n.addChild(new y({rect:new DOMRect(s,a,100,100),fillColor:l,cornerRadius:5})),i==="circle"&&n.addChild(new at({rect:new DOMRect(s,a,100,100),fillColor:l})),i==="star"&&n.addChild(new pt({rect:new DOMRect(s,a,100,100),fillColor:l})),i==="polygon"&&n.addChild(new B({rect:new DOMRect(s,a,100,100),fillColor:l,pointCount:9})),i==="line"&&n.addChild(new $({rect:new DOMRect(s,a,100,1),strokeColor:l})),i==="arrow"&&n.addChild(new it({rect:new DOMRect(s,a,100,1),strokeColor:l,fillColor:l,endArrow:"triangle-arrow"}))}for(let o=0;o<5;o++){const{x:i,y:s}={x:Math.random()*n.canvas.width,y:Math.random()*n.canvas.height};n.addChild(new ht({rect:new DOMRect(i,s,100,100),image:`https://picsum.photos/seed/seed-${o+1}/300/300`}))}const{x:t,y:e}={x:Math.random()*n.canvas.width,y:Math.random()*n.canvas.height};n.addChild(new mt({clip:!1,rect:new DOMRect(t,e,100,100),children:[new y({rect:new DOMRect(0,0,100,100),fillColor:"purple",cornerRadius:5}),new y({rect:new DOMRect(5,5,100,100),fillColor:"blue",cornerRadius:5}),new y({rect:new DOMRect(10,10,100,100),fillColor:"yellow",cornerRadius:5})]})),n.addChild(new N({rect:new DOMRect(1e3,1e3,100,100),fillColor:"gray",padding:10,child:new y({rect:new DOMRect(0,0,100,100),fillColor:"purple",cornerRadius:5})})),n.addChild(new gt({label:"Frame",rect:new DOMRect(600,600,100,100),fillColor:"gray",padding:10,child:new y({rect:new DOMRect(0,0,100,100),fillColor:"purple",cornerRadius:5})}))}const R=2,E={width:50,height:50},C={x:250,y:250};function Et(n){const r=(E.width+R)*3+E.width/2;M(n,C.x,[[1,0,1],[1,0,1],[1,1,1],[1,0,1],[1,0,1]]),M(n,C.x+r,[[1,1,1],[1,0,0],[1,1,1],[1,0,0],[1,1,1]]),M(n,C.x+r*2,[[1,0,0],[1,0,0],[1,0,0],[1,0,0],[1,1,1]]),M(n,C.x+r*3,[[1,0,0],[1,0,0],[1,0,0],[1,0,0],[1,1,1]]),M(n,C.x+r*4,[[1,1,1],[1,0,1],[1,0,1],[1,0,1],[1,1,1]])}function M(n,r,t){for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)if(t[e][o]===1){const i=new y({rect:new DOMRect(r,C.y,E.width,E.height),fillColor:"#000000",cornerRadius:5});i.rect.x+=o*(i.rect.width+R),i.rect.y+=e*(i.rect.height+R),n.addChild(i);const s=i.rect.x,a=i.rect.y;i.onUpdate=l=>{i.rect.x=s+Math.sin(l/1e3)*10,i.rect.y=a+Math.cos(l/1e3)*10}}}function bt(n){const r=new y({rect:new DOMRect(100,500,150,150),fillColor:"hsl(0, 100%, 50%)"});r.onUpdate=t=>{const e=t/3e3,{h:o}=At(r.fillColor),i=(Math.sin(e)+1)/2,s=(o+360*i)%360;r.fillColor=`hsl(${s}, 100%, 50%)`},n.addChild(r)}function At(n){const r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n);return r?{h:parseInt(r[1]),s:parseFloat(r[2]),l:parseFloat(r[3])}:{h:0,s:0,l:0}}function jt(n){const r=new G({offset:{x:0,y:0},characters:"Hello",fontFamily:"Arial",fillColor:"--canvas-text-color, red"});n.addChild(r)}var Rt=Object.defineProperty,zt=Object.getOwnPropertyDescriptor,K=(n,r,t,e)=>{for(var o=e>1?void 0:e?zt(r,t):r,i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=(e?s(r,t,o):s(o))||o);return e&&o&&Rt(r,t,o),o};let b=class extends q{render(){return Q` <canvas id="canvas"></canvas> `}firstUpdated(){const n=this.canvas,r=new Dt(n);r.addListener(()=>{const{offset:t,scale:e}=r.info;console.debug(`offset: ${t.x}, ${t.y}; scale: ${e}`)}),r.init(),Et(r),bt(r),kt(r),jt(r)}};b.styles=U`
    * {
      --canvas-background-color: #fafafa;
      --canvas-grid-color: #ccc;
      --canvas-selected-color: #f00;
      --canvas-hovered-color: #0f0;
      --canvas-text-color: #000;
      cursor: pointer;
      user-select: none;
      user-zoom: none;
    }
    @media (prefers-color-scheme: dark) {
      * {
        --canvas-background-color: #333;
        --canvas-grid-color: #666;
        --canvas-selected-color: #bd0303;
        --canvas-hovered-color: #04a104;
        --canvas-text-color: #fff;
      }
    }
  `;K([H("#canvas")],b.prototype,"canvas",2);b=K([J("canvas-editor")],b);
